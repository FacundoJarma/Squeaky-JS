<section
  id="animated-text"
  class="h-[300vh] relative flex flex-col items-center"
>
  <div class="w-full grid place-items-center sticky top-0 h-screen">
    <div id="step-1" class="step">
      <h3
        class="flex gap-x-1 text-6xl font-bold text-white overflow-hidden leading-loose"
      >
        <span> 1. </span><span> 2. </span><span> 3. </span>
      </h3>
    </div>

    <div id="step-2" class="step">
      <h3 class="text-6xl font-bold">
        <span class="text-[#ce84ff]">Aprende.</span>
        <span class="text-[#3c8f87]">Ejercita.</span>
        <span class="text-[#aaa33a]">Programa.</span>
      </h3>
    </div>

    <div id="step-3" class="step">
      <h3
        class="relative flex gap-x-2 text-6xl font-bold text-white overflow-hidden h-16 text-center"
      >
        <span>Por</span><span>para</span>
      </h3>
      <h3 class="text-6xl font-bold text-center text-[#ce84ff]">estudiantes</h3>
    </div>
  </div>

  <style>
    .step {
      opacity: 0%;
      position: absolute;
    }
    #step-1 {
      span {
        transform: translateY(100%);
        line-height: 1.4 !important;
      }
    }
    #step-2 {
      h3 {
        transform: translateY(30%);
      }
      h3 span {
        opacity: 0;
      }
    }

    #step-3 {
      h3 > span {
        left: 50%;
        position: absolute;
        transform: translateY(100%) translateX(-50%);
      }
    }
  </style>

  <script>
    import { scroll, timeline } from "motion";

    const sequence = [
      ["#step-1", { opacity: 1 }],
      [
        "#step-1 h3 span:nth-child(1)",
        { transform: "translateY(0%)" },
        { duration: 0.2 },
      ],
      [
        "#step-1 h3 span:nth-child(2)",
        { transform: "translateY(0%)" },
        { duration: 0.2, at: "-0.16" },
      ],
      [
        "#step-1 h3 span:nth-child(3)",
        { transform: "translateY(0%)" },
        { duration: 0.2, at: "-0.16" },
      ],
      ["#step-1 h3 span:nth-child(1)", { color: "#ce84ff" }, { duration: 0.1 }],
      ["#step-1 h3 span:nth-child(2)", { color: "#3c8f87" }, { duration: 0.1 }],
      ["#step-1 h3 span:nth-child(3)", { color: "#aaa33a" }, { duration: 0.1 }],
      [
        "#step-1 h3 span:nth-child(1)",
        { transform: "translateY(100%)" },
        { duration: 0.2 },
      ],
      [
        "#step-1 h3 span:nth-child(2)",
        { transform: "translateY(100%)" },
        { duration: 0.2, at: "-0.16" },
      ],
      [
        "#step-1 h3 span:nth-child(3)",
        { transform: "translateY(100%)" },
        { duration: 0.2, at: "-0.16" },
      ],

      ["#step-2", { opacity: 1 }, { duration: 0.000001, at: "-0.1" }],

      [
        "#step-2 h3",
        { opacity: 1, transform: "translateY(0%)" },
        { duration: 0.1 },
      ],
      ["#step-2 h3 span:nth-child(1)", { opacity: 1 }, { duration: 0.2 }],
      [
        "#step-2 h3 span:nth-child(2)",
        { opacity: 1 },
        { duration: 0.2, at: "-0.08" },
      ],
      [
        "#step-2 h3 span:nth-child(3)",
        { opacity: 1 },
        { duration: 0.2, at: "-0.08" },
      ],
      ["#step-2", { opacity: 0 }, { duration: 0.000001, at: "+0.2" }],
      ["#step-3", { opacity: 1 }, { duration: 0.1 }],
      [
        "#step-3 h3 span:nth-child(1)",
        { transform: "translateY(0%) translateX(-50%)" },
        { duration: 0.2, at: "-0.1" },
      ],
      [
        "#step-3 h3 span:nth-child(1)",
        { transform: "translateY(100%) translateX(-50%)" },
        { duration: 0.2, at: "+0.1" },
      ],
      [
        "#step-3 h3 span:nth-child(2)",
        { transform: "translateY(0%) translateX(-50%)" },
        { duration: 0.2, at: "-0.1" },
      ],
    ];

    const onScroll = timeline(sequence);

    scroll(onScroll, {
      target: document.querySelector("#animated-text"),
      offset: ["-400px", "end end"],
    });
  </script>
</section>
