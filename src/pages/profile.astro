---
import Layout from "../layout/layout.astro";
import Racha from "../components/Racha.astro";
import { Icon } from "astro-icon/components";
---

<Layout title="Squeaky JS | Perfil">
  <div id="perfil">
    <div class="profile">
      <div class="foto"></div>
      <h1 class="title" id="usernameLabel">Cargando...</h1>
      <textarea placeholder="Descripcion" class="desc"></textarea>
    </div>
    <div class="tu">
      <div class="profile2">
        <h2 class= "font-sans font-bold text-2xl text-white mb-4 mt-2">Tus Datos</h2>
        <button class="edit" id="edit">
          <Icon name="lapiz" width={20} height={20} />
        </button>
        
        <h2>Nombre y Apellido</h2>
        <input type="text" id="nombreApellidoInput" disabled>

        <h2>Correo Electronico</h2>
        <input type="text" id="gmail" disabled>
        
        <h2>Contrase√±a</h2>
        <input type="password" disabled>

        <h2>Fecha de  Nacimiento</h2>
        <input type="date" id="dateInput" disabled>

      </div>
      <div class="racha -z-10">
        <h2 class="font-sans font-bold text-2xl text-white my-4 ml-4">Racha por conectividad</h2>
        <Racha />
      </div>
    </div>
  </div>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap');
    h2{
      font-family: 'Urbanist', sans-serif;  
    }
    .title {
      font-size: 36px;
      font-weight: bold;
      font-family: "Lexend", sans-serif;
    }
    .edit {
      background-color: gray;
      width: 2em;
      height: 2em;
      border-radius: 50%;
      display:flex;
      justify-content: center;
      align-items: center;
      margin-left: 40em;
      margin-bottom: 4em;
      position: absolute;
      margin-top: 0.75em;
    }
    
    input::placeholder {
      color: #000;
    }
    .tu {
      display: flex;
      flex-direction: column;
      gap: 1em;
    }
    .racha {
      background-color: #23262F;
      width: 45em;
      height: 10.4em;

    }

    #perfil {
      display: flex;
      gap: 1em;
      justify-content: center;
      margin-inline: auto;
    }
    .profile2 {
      background-color: #23262F;
      display: flex;
      flex-direction: column;
      align-items: left;
      gap: 0.4em;
      width: 45em;
      /* height: 23em; */
      padding: 1em;
      color: black;
      margin-top: 3em;
      
      
    }
    .profile2 > input {
      border-radius: 0.5em;
      width: 30em;
      height: 2em;
      color: rgb(250, 246, 246);
      background-color: #4C4C4C;
      padding-left: 1em;
      border: 1px solid #A4A4A4 ;
      font-family: 'Lexend', sans-serif;
      
    }
    .profile2 > h2 {
      color: white;
      font-size: 4em large>;
      
    }
    .profile {
      background-color: #23262F;
      width: 30em;
      height: 34.1em;
      text-align: center;
      align-items: center;
      padding: 3em;
      margin-top: 3em;
      display: flex;
      gap: 2em;
      flex-direction: column;
      
    }
    .profile > h1 {
      color: white;
    }
  
    .desc {
      background-color: #23262F;
      width: 20em;
      height: 7em;
      text-align: center;
      color: white;
      border-radius: 10px;
      resize: none;
    }
    .desc::placeholder {
      color: white;
      text-align: center;
      padding-top: 40px;
      resize: none;
    }
    .foto {
      background-color: rgb(28, 33, 41);
      width: 15em;
      height: 15em;
      border-radius: 50em;
      text-align: center;
      align-items: center;
      padding: 3em;
    }
    .nombre {
      background-color: #4C4C4C;
    }
    
  </style>
  <script>
    const $edit = document.getElementById("edit") as HTMLButtonElement;
    $edit.addEventListener("click", () => {
      const $inputs = document.querySelectorAll("input") as NodeListOf<HTMLInputElement>;
      $inputs.forEach(($input) => {
        $input.disabled = !$input.disabled;
      });
    });

    const userInfo = JSON.parse(localStorage.getItem("user"));
    
    const $usernameLabel = document.getElementById("usernameLabel") as HTMLHeadingElement;
    $usernameLabel.innerHTML = "@"+userInfo?.username
    
    const $nombreApellidoInput = document.getElementById("nombreApellidoInput") as HTMLInputElement;
    $nombreApellidoInput.value = userInfo?.name ? userInfo?.name : "";

    const $gmail = document.getElementById("gmail") as HTMLInputElement;
    $gmail.value = userInfo?.email ? userInfo?.email : "";
  </script>

</Layout>
